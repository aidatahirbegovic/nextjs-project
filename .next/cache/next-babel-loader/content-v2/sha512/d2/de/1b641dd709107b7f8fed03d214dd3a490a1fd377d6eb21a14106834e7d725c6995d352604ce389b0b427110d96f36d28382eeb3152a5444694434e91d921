{"ast":null,"code":"//we dont create react components\n// /api/new-meetup\nimport { MongoClient } from \"mongodb\";\n\nasync function handler(req, res) {\n  //req - request contains data about incoming request\n  //res - respons will be needed for sending back response\n  if (req.method === \"POST\") {\n    try {\n      //which kind of request was send\n      const data = req.body; //body of incoming request\n      //const { title, image, address, description } = data; //object distracturing\n      //store in database\n\n      const client = await MongoClient.connect(\"mongodb+srv://user-aida:aidaturska995.@cluster0.djm6g.mongodb.net/meetups?retryWrites=true&w=majority\");\n      const db = client.db();\n      const meetupsCollection = db.collection(\"meetups\");\n      const result = await meetupsCollection.insertOne(data); //inserting one new document in this collection\n      //if we dont have database or collection it will be created here\n      //collection is a javascript object\n\n      console.log(result); //get generated id\n\n      client.close(); //to close database connection\n      //we need to use response object to send back response\n\n      res.status(201).json({\n        message: \"Meetup inserted\"\n      }); //we will have status 201 that we wrote here if it was successfull\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n} //connect retruns promise\n\n\nexport default handler;","map":null,"metadata":{},"sourceType":"module"}